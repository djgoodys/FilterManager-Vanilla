<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FilterManager.net checkout</title>
  </head>
  <body style="background-color: black">
    <table style="width: 60%">
      <tr>
        <td
          style="
            font-size: 1.5em;
            font-weight: bold;
            background-color: #c2b730;
            color: black;
            width: 59%;
            font-family: Monospace;
            border-radius: 1%;
            margin-left: 0px;
            padding: 5px;
          "
        >
          Get your free 3-month trial. Cancel anytime. Click the paypal option
          below to get started. You will not be charged anything during your
          free trial. Do nothing and your automatic billing starts at the
          beginning of your 4th month.
        </td>
        <td>
          <img
            src="../../images/freetrial.png"
            style="margin-left: 0px; width: 400px; height: auto"
            alt="Filter Manager Free Trial"
          />
        </td>
      </tr>
    </table>


<div id="paypal-button-container-P-4D7280920H124104VMX7EKEQ"></div>
<script src="https://www.paypal.com/sdk/js?client-id=AYRfPQoO2cGUOdP_h4Ptv0OB-TBaGPGQ6s8OLHl1ghkh6ljd4h8H3Wlb8lVcgzFONuTQZFDglvfz6qdP&vault=true&intent=subscription" data-sdk-integration-source="button-factory"></script>
<script>
  paypal.Buttons({
      style: {
          shape: 'rect',
          color: 'gold',
          layout: 'vertical',
          label: 'subscribe'
      },
      createSubscription: function(data, actions) {
        return actions.subscription.create({
          /* Creates the subscription */
          plan_id: 'P-4D7280920H124104VMX7EKEQ'
        });
      },
      onApprove: function(data, actions) {
        var subscriptionId = data.subscriptionID;
        ShowPopUp(data.subscriptionID);
        }
  }).render('#paypal-button-container-P-4D7280920H124104VMX7EKEQ'); // Renders the PayPal button
</script>
<style>
  #popup {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 999; /* Ensure popup is on top of other content */
  }

  #popup-content {
    background-color: #fff;
    padding: 20px;
    border-radius: 5px;
    text-align: center;
  }

  #countdown {
    font-size: 24px;
    margin-bottom: 10px;
  }
</style>
</head>
<body>
<div id="popup" style="display:none;">
  <div id="popup-content">
    <p>This is your subscription ID. Please write it down for future reference:</p>
    <p id="subscription-id"><b>Subscription ID: </b><span id="sub-id-value"></span></p>
    <p><button id="copy-button">Copy to clipboard</button></p>
    <p>Do not leave this page. Will be redirecting to your app setup after count down.</p>
    <p id="countdown">20</p>
  </div>
</div>

<script>
  function ShowPopUp(subscriptionId){
  const countdownElement = document.getElementById('countdown');
  const subIdValueElement = document.getElementById('sub-id-value');
  document.getElementById("popup").style.display="flex";
  subIdValueElement.textContent = subscriptionId; // Set subscription ID

  let timeLeft = 20;

  const countdown = setInterval(() => {
    countdownElement.textContent = timeLeft;
    timeLeft--;

    if (timeLeft === 0) {
      clearInterval(countdown);
      window.location.href = `../../cust_signup.php?subscription_id=${subscriptionId}`;
    }
  }, 1000); // Update countdown every second
}
</script>
<script>

function copyToClipboard() {
  // Modern browsers using Clipboard API
  if (navigator.clipboard && navigator.clipboard.writeText) {
    navigator.clipboard.writeText(document.getElementById("sub-id-value").innerText)
      .then(() => {
        console.log('Subscription ID copied to clipboard!');
      })
      .catch(err => {
        console.error('Failed to copy: ', err);
      });
  } else {
    // Fallback for older browsers: create a temporary text area
    const textArea = document.createElement('textarea');
    textArea.value = subscriptionId;
    document.body.appendChild(textArea);
    textArea.select();
    document.execCommand('copy');
    document.body.removeChild(textArea);
    console.log('Subscription ID copied to clipboard (fallback method)');
  }
}
const copyButton = document.getElementById('copy-button'); // Assuming there's a button with this ID
copyButton.addEventListener('click', copyToClipboard);
</script>
